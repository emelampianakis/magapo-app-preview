"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4054],{4054:(Y,v,l)=>{l.r(v),l.d(v,{HomePageModule:()=>L});var r=l(4488),h=l(177),w=l(4341),b=l(8986),c=l(467),m=l(8254),C=l(7392),_=l(5083),d=l(9969);const B=(0,_.F3)("App",{web:()=>l.e(9303).then(l.bind(l,9303)).then(i=>new i.AppWeb)});class P extends _.E_{write(s){var n=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw n.unavailable("Clipboard API not available in this browser");if(void 0!==s.string)yield n.writeText(s.string);else if(s.url)yield n.writeText(s.url);else{if(!s.image)throw new Error("Nothing to write");if(!(typeof ClipboardItem<"u"))throw n.unavailable("Writing images to the clipboard is not supported in this browser");try{const t=yield(yield fetch(s.image)).blob(),o=new ClipboardItem({[t.type]:t});yield navigator.clipboard.write([o])}catch{throw new Error("Failed to write image")}}})()}read(){var s=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw s.unavailable("Clipboard API not available in this browser");if(!(typeof ClipboardItem<"u"))return s.readText();try{const n=yield navigator.clipboard.read(),t=n[0].types[0],o=yield n[0].getType(t);return{value:yield s._getBlobData(o,t),type:t}}catch{return s.readText()}})()}readText(){var s=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw s.unavailable("Reading from clipboard not supported in this browser");return{value:yield navigator.clipboard.readText(),type:"text/plain"}})()}writeText(s){var n=this;return(0,c.A)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw n.unavailable("Writting to clipboard not supported in this browser");yield navigator.clipboard.writeText(s)})()}_getBlobData(s,n){return new Promise((t,o)=>{const a=new FileReader;n.includes("image")?a.readAsDataURL(s):a.readAsText(s),a.onloadend=()=>{t(a.result)},a.onerror=u=>{o(u)}})}}const j=(0,_.F3)("Clipboard",{web:()=>new P});var e=l(4438),f=l(5114),x=l(8490),T=l(5683),F=l(7947),y=l(2542);function M(i,s){if(1&i){const n=e.RV6();e.j41(0,"ion-button",39),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3).$implicit,a=e.XpG(2);return e.Njj(a.seeMore(a.parseLink(o.url).url))}),e.nrm(1,"ion-icon",40),e.k0s()}}function I(i,s){if(1&i){const n=e.RV6();e.j41(0,"ion-button",39),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3).$implicit,a=e.XpG(2);return e.Njj(a.seeMore(a.parseLink(o.url).url))}),e.nrm(1,"ion-icon",41),e.k0s()}}function A(i,s){if(1&i){const n=e.RV6();e.j41(0,"ion-button",39),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3).$implicit,a=e.XpG(2);return e.Njj(a.seeMore(a.parseLink(o.url).destination))}),e.nrm(1,"ion-icon",42),e.k0s()}}function H(i,s){if(1&i){const n=e.RV6();e.j41(0,"ion-button",39),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3).$implicit,a=e.XpG(2);return e.Njj(a.seeMore(a.parseLink(o.url).tel))}),e.nrm(1,"ion-icon",43),e.k0s()}}function E(i,s){if(1&i){const n=e.RV6();e.j41(0,"ion-button",39),e.bIt("click",function(){e.eBV(n);const o=e.XpG(3).$implicit,a=e.XpG(2);return e.Njj(a.seeMore(a.parseLink(o.url).mailto))}),e.nrm(1,"ion-icon",44),e.k0s()}}function G(i,s){if(1&i){const n=e.RV6();e.j41(0,"div",37),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2).index,a=e.XpG(2);return e.Njj(a.toggleOverlay(o))}),e.DNE(1,M,2,0,"ion-button",38)(2,I,2,0,"ion-button",38)(3,A,2,0,"ion-button",38)(4,H,2,0,"ion-button",38)(5,E,2,0,"ion-button",38),e.k0s()}if(2&i){const n=e.XpG(2).$implicit,t=e.XpG(2);e.Y8G("@overlayAnimation",void 0),e.R7$(),e.Y8G("ngIf",t.parseLink(n.url).url&&t.parseLink(n.url).url.includes("facebook")),e.R7$(),e.Y8G("ngIf",t.parseLink(n.url).url&&!t.parseLink(n.url).url.includes("facebook")),e.R7$(),e.Y8G("ngIf",t.parseLink(n.url).destination),e.R7$(),e.Y8G("ngIf",t.parseLink(n.url).tel),e.R7$(),e.Y8G("ngIf",t.parseLink(n.url).mailto)}}function D(i,s){if(1&i){const n=e.RV6();e.j41(0,"div",33)(1,"pinch-zoom",34)(2,"img",35),e.bIt("click",function(){e.eBV(n);const o=e.XpG().index,a=e.XpG(2);return e.Njj(a.toggleOverlay(o))}),e.k0s()(),e.DNE(3,G,6,6,"div",36),e.k0s()}if(2&i){const n=e.XpG(),t=n.$implicit,o=n.index,a=e.XpG(2);e.R7$(),e.Y8G("double-tap",!1)("disableZoomControl","disable")("disabled",a.pinchZoomDisabled),e.R7$(),e.Y8G("src",t.image,e.B4B),e.R7$(),e.Y8G("ngIf",a.visibleOverlayIndex===o)}}function O(i,s){if(1&i&&(e.j41(0,"swiper-slide")(1,"ion-card"),e.DNE(2,D,4,5,"div",32),e.k0s()()),2&i){const n=s.$implicit;e.R7$(2),e.Y8G("ngIf",n.image&&!n.image.includes("default"))}}function S(i,s){if(1&i&&(e.j41(0,"div",29)(1,"swiper-container",30),e.DNE(2,O,3,1,"swiper-slide",31),e.k0s()()),2&i){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",n.swiperData)}}function R(i,s){1&i&&(e.j41(0,"ion-button",45),e.nrm(1,"ion-icon",46),e.k0s())}function $(i,s){1&i&&(e.j41(0,"ion-button",45),e.nrm(1,"ion-icon",47),e.k0s())}function V(i,s){1&i&&(e.j41(0,"ion-button",45),e.EFF(1,"\u03a4\u03ad\u03bb\u03bf\u03c2"),e.k0s())}const k="app-tour-seen",g="app-theme",N=[{path:"",component:(()=>{var i;class s{constructor(t,o,a,u,p){this.joyrideService=t,this.dataService=o,this.functionsService=a,this.firebaseMessagingService=u,this.toastCtrl=p,this.swiperData=[],this.pinchZoomDisabled=!_.Ii.isNativePlatform(),this.visibleOverlayIndex=null,this.pushEnabled=!1,this.lastClickTime=0,this.timeConstraint=1e3,this.clickCount=0}ngOnInit(){var t=this;return(0,c.A)(function*(){(yield m.p.get({key:k})).value||setTimeout(()=>{t.startTour()},1e3);const a=yield m.p.get({key:g});t.selectedTheme=a.value?a.value:"system",t.firebaseMessagingService.pushEnabled$.subscribe(u=>{t.pushEnabled=u}),t.setVersions()})()}ionViewDidEnter(){this.fetchHomeBanners()}ionViewDidLeave(){const t=document.querySelector("ion-menu");null==t||t.close()}getLogoPath(){return"light"===this.selectedTheme||"system"===this.selectedTheme&&!1===window.matchMedia("(prefers-color-scheme: dark)").matches?"assets/logo_dark.png":"dark"===this.selectedTheme||"system"===this.selectedTheme&&!0===window.matchMedia("(prefers-color-scheme: dark)").matches?"assets/logo_light.png":"assets/logo_dark.png"}startTour(){this.joyrideService.startTour({steps:["step1","step2@tabs","step3@tabs","step4@tabs","step5@tabs","step6@tabs/home","step7@tabs/home"],themeColor:"#e997c5"}),this.tourSeen()}tourSeen(){return(0,c.A)(function*(){yield m.p.set({key:k,value:"true"})})()}seeMore(t){var o=this;return(0,c.A)(function*(){if(t)if(t.startsWith("tel:")||t.startsWith("mailto:"))window.open(t,"_blank");else if(t.includes("facebook"))window.location.href=t;else if(t.startsWith("destination:")){const u=t.slice(12).trim();yield o.openMap(u)}else yield C.P.open({url:t})})()}initializeSwiperContainer(){setTimeout(()=>{const t=document.querySelector("swiper-container");t&&(Object.assign(t,{slidesPerView:1,autoplay:!0,effect:"slide",pagination:!0,loop:!0,on:{init(){console.log("swiper initialized")}}}),null==t||t.initialize())},0)}segmentChanged(t){var o=this;return(0,c.A)(function*(){if("dark"===t.detail.value)yield m.p.set({key:g,value:"dark"}),o.selectedTheme=t.detail.value,document.body.classList.toggle("dark",!0);else if("light"===t.detail.value)yield m.p.set({key:g,value:"light"}),o.selectedTheme=t.detail.value,document.body.classList.toggle("dark",!1);else if("system"===t.detail.value){yield m.p.set({key:g,value:"system"}),o.selectedTheme=t.detail.value;const a=window.matchMedia("(prefers-color-scheme: dark)");document.body.classList.toggle("dark",a.matches)}})()}fetchHomeBanners(){this.swiperData=[];try{this.dataService.getHomeBanners().subscribe(t=>{Object.values(t).forEach(o=>{this.swiperData.push(...o)}),this.swiperData&&this.swiperData.length&&this.initializeSwiperContainer()})}catch(t){console.error("Error fetching home banners:",t)}}openPrivacyPolicy(){return(0,c.A)(function*(){yield C.P.open({url:"https://mobile-app-magapo.gr/privacy-policy"})})()}contactUs(){window.open("mailto:info@magapo.gr","_blank")}toggleOverlay(t){this.visibleOverlayIndex=this.visibleOverlayIndex===t?null:t}parseLink(t){return this.functionsService.parseLink(t)}openMap(t){return(0,c.A)(function*(){window.open(`https://maps.google.com/maps?daddr=${t}`,"_system")})()}toggleChanged(t){t.detail.checked?this.firebaseMessagingService.initializePush():this.firebaseMessagingService.deleteToken()}setVersions(){var t=this;return(0,c.A)(function*(){_.Ii.isNativePlatform()?(t.appVersion=(yield B.getInfo()).version,t.appBuild=(yield B.getInfo()).build):(t.appVersion="0.0",t.appBuild="web")})()}handleClick(){const t=(new Date).getTime();t-this.lastClickTime<=this.timeConstraint?(this.clickCount++,5===this.clickCount&&this.copyToken()):this.clickCount=1,this.lastClickTime=t}copyToken(){var t=this;return(0,c.A)(function*(){yield j.write({string:t.firebaseMessagingService.token}),yield(yield t.toastCtrl.create({message:"Token copied to clipboard!",duration:1500,position:"top",color:"light"})).present()})()}}return(i=s).\u0275fac=function(t){return new(t||i)(e.rXU(f.E),e.rXU(x.u),e.rXU(T.b),e.rXU(F.d),e.rXU(r.K_))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-home"]],decls:72,vars:11,consts:[["menu",""],["prevButton",""],["nextButton",""],["doneButton",""],["contentId","home-content","side","end"],["color","light"],["lines","full"],["aria-hidden","true","name","color-palette-outline","slot","start"],["color","tertiary","mode","ios",3,"ionChange","value"],["value","light"],["value","dark"],["value","system"],["enable-on-off-labels","true",3,"ionChange","checked"],["name","notifications-outline","slot","start"],["button","true","detail","false",3,"click"],["aria-hidden","true","name","play-outline","slot","start"],["aria-hidden","true","name","shield-checkmark-outline","slot","start"],["aria-hidden","true","name","mail-outline","slot","start"],[2,"position","absolute","bottom","16px","width","100%","text-align","center","font-weight","100",3,"click"],["id","home-content",1,"ion-page"],[3,"translucent"],["slot","primary"],["color","primary","joyrideStep","step7","stepPosition","bottom","title","\u03a0\u03bb\u03b7\u03c1\u03bf\u03c6\u03bf\u03c1\u03af\u03b5\u03c2","text","\u0395\u03b4\u03ce \u03bc\u03c0\u03bf\u03c1\u03b5\u03af\u03c2 \u03bd\u03b1 \u03b4\u03b5\u03af\u03c2 \u03be\u03b1\u03bd\u03ac \u03c4\u03b7\u03bd \u03b5\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03ba\u03b1\u03b9 \u03bd\u03b1 \u03b2\u03c1\u03b5\u03af\u03c2 \u03b5\u03c0\u03b9\u03c0\u03bb\u03ad\u03bf\u03bd \u03b5\u03c0\u03b9\u03bb\u03bf\u03b3\u03ad\u03c2."],["color","light",3,"fullscreen"],[1,"home-container"],[1,"logo-container"],["alt","App logo","joyrideStep","step1","stepPosition","bottom","title","\u039a\u03b1\u03bb\u03bf\u03c3\u03cc\u03c1\u03b9\u03c3\u03b5\u03c2!","text","\u0394\u03ad\u03c2 \u03c3\u03b5 \u03bc\u03b9\u03b1 \u03c3\u03cd\u03bd\u03c4\u03bf\u03bc\u03b7 \u03b5\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03c4\u03af \u03c0\u03b5\u03c1\u03b9\u03bb\u03b1\u03bc\u03b2\u03ac\u03bd\u03b5\u03b9 \u03b7 \u03b5\u03c6\u03b1\u03c1\u03bc\u03bf\u03b3\u03ae \u03bc\u03b1\u03c2!",3,"src","prevTemplate","nextTemplate","doneTemplate"],["href","https://www.facebook.com/groups/ilioupolitisses/","target","_blank"],["class","slides-container",4,"ngIf"],[1,"slides-container"],["init","false"],[4,"ngFor","ngForOf"],["style","display: flex",4,"ngIf"],[2,"display","flex"],[3,"double-tap","disableZoomControl","disabled"],["alt","Store banner",3,"click","src"],["class","overlay","style","\n                    display: flex;\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    background: rgba(0, 0, 0, 0.6);\n                    justify-content: center;\n                    align-items: center;\n                    gap: 16px;\n                  ",3,"click",4,"ngIf"],[1,"overlay",2,"display","flex","position","absolute","top","0","left","0","width","100%","height","100%","background","rgba(0, 0, 0, 0.6)","justify-content","center","align-items","center","gap","16px",3,"click"],["fill","outline",3,"click",4,"ngIf"],["fill","outline",3,"click"],["name","logo-facebook"],["name","globe-outline"],["name","navigate-outline"],["name","call-outline"],["name","mail-outline"],["size","small","fill","clear"],["name","arrow-back-outline","slot","icon-only"],["name","arrow-forward-outline","slot","icon-only"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"ion-menu",4,0)(2,"ion-header")(3,"ion-toolbar")(4,"ion-title"),e.EFF(5,"Magapo"),e.k0s()()(),e.j41(6,"ion-content",5)(7,"ion-list",6)(8,"ion-list-header")(9,"ion-label"),e.EFF(10,"Settings"),e.k0s()(),e.j41(11,"ion-item"),e.nrm(12,"ion-icon",7),e.j41(13,"ion-segment",8),e.bIt("ionChange",function(p){return e.eBV(a),e.Njj(o.segmentChanged(p))}),e.j41(14,"ion-segment-button",9)(15,"ion-label"),e.EFF(16,"Light"),e.k0s()(),e.j41(17,"ion-segment-button",10)(18,"ion-label"),e.EFF(19,"Dark"),e.k0s()(),e.j41(20,"ion-segment-button",11)(21,"ion-label"),e.EFF(22,"System"),e.k0s()()()(),e.j41(23,"ion-item")(24,"ion-toggle",12),e.bIt("ionChange",function(p){return e.eBV(a),e.Njj(o.toggleChanged(p))}),e.j41(25,"ion-label"),e.EFF(26,"Allow Notifications"),e.k0s()(),e.nrm(27,"ion-icon",13),e.k0s()(),e.j41(28,"ion-list",6)(29,"ion-list-header")(30,"ion-label"),e.EFF(31,"Information"),e.k0s()(),e.j41(32,"ion-item",14),e.bIt("click",function(){return e.eBV(a),e.sdS(1).close(),e.Njj(o.startTour())}),e.nrm(33,"ion-icon",15),e.j41(34,"ion-label"),e.EFF(35,"Tutorial"),e.k0s()(),e.j41(36,"ion-item",14),e.bIt("click",function(){return e.eBV(a),e.sdS(1).close(),e.Njj(o.openPrivacyPolicy())}),e.nrm(37,"ion-icon",16),e.j41(38,"ion-label"),e.EFF(39,"Privacy Policy"),e.k0s()()(),e.j41(40,"ion-list",6)(41,"ion-list-header")(42,"ion-label"),e.EFF(43,"Support"),e.k0s()(),e.j41(44,"ion-item",14),e.bIt("click",function(){return e.eBV(a),e.sdS(1).close(),e.Njj(o.contactUs())}),e.nrm(45,"ion-icon",17),e.j41(46,"ion-label"),e.EFF(47,"Contact Us"),e.k0s()()(),e.j41(48,"ion-note",18),e.bIt("click",function(){return e.eBV(a),e.Njj(o.handleClick())}),e.EFF(49),e.k0s()()(),e.j41(50,"div",19)(51,"ion-header",20)(52,"ion-toolbar")(53,"ion-title"),e.EFF(54," \u0391\u03c1\u03c7\u03b9\u03ba\u03ae "),e.k0s(),e.j41(55,"ion-buttons",21),e.nrm(56,"ion-menu-button",22),e.k0s()()(),e.j41(57,"ion-content",23)(58,"div",24)(59,"div",25),e.nrm(60,"img",26),e.j41(61,"p"),e.EFF(62," \u039c\u03c0\u03ad\u03c2 \u03c3\u03c4\u03b7\u03bd \u03bf\u03bc\u03ac\u03b4\u03b1 \u03bc\u03b1\u03c2 \u03c3\u03c4\u03bf "),e.j41(63,"a",27),e.EFF(64," Facebook "),e.k0s()()(),e.DNE(65,S,3,1,"div",28),e.k0s()(),e.DNE(66,R,2,0,"ng-template",null,1,e.C5r)(68,$,2,0,"ng-template",null,2,e.C5r)(70,V,2,0,"ng-template",null,3,e.C5r),e.k0s()}if(2&t){const a=e.sdS(67),u=e.sdS(69),p=e.sdS(71);e.R7$(13),e.Y8G("value",o.selectedTheme),e.R7$(11),e.Y8G("checked",o.pushEnabled),e.R7$(25),e.Lme("version: ",o.appVersion,".",o.appBuild,""),e.R7$(2),e.Y8G("translucent",!1),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("src",o.getLogoPath(),e.B4B)("prevTemplate",a)("nextTemplate",u)("doneTemplate",p),e.R7$(5),e.Y8G("ngIf",o.swiperData&&o.swiperData.length)}},dependencies:[r.Jm,r.QW,r.b_,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.AF,r.oS,r.MC,r.JI,r.Gp,r.eP,r.BC,r.BY,r.ai,r.hB,r.Je,h.Sq,h.bT,f.qQ,y.Hg],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;height:100%;overflow:auto}.logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px;text-align:center;max-height:50%}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}ion-modal#info-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#info-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#info-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:16px;width:24px;height:24px;color:var(--ion-color-primary)}ion-modal#info-modal[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:OpenSans}.slides-container[_ngcontent-%COMP%]{width:100%}swiper-container[_ngcontent-%COMP%]{width:100%;height:100%;--swiper-pagination-bullet-inactive-color: var(--ion-color-primary);--swiper-pagination-color: var(--ion-color-primary)}swiper-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-card[_ngcontent-%COMP%]{font-size:0;margin:2rem 16px}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:20px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{font-size:18px}ion-list[_ngcontent-%COMP%]{background:transparent}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--min-height: 70px}"],data:{animation:[(0,d.hZ)("overlayAnimation",[(0,d.wk)("void",(0,d.iF)({opacity:0})),(0,d.wk)("*",(0,d.iF)({opacity:1})),(0,d.kY)(":enter",[(0,d.iF)({opacity:0}),(0,d.i0)("300ms ease-in")]),(0,d.kY)(":leave",[(0,d.i0)("300ms ease-out",(0,d.iF)({opacity:0}))])])]}}),s})()}];let X=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[b.iI.forChild(N),b.iI]}),s})(),L=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[r.bv,h.MD,w.YN,X,f.p$.forChild(),y.Ud]}),s})()}}]);